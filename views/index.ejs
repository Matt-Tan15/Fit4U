<!DOCTYPE html>
<html lang="en">
<%- include('./partials/head.ejs')%>
<script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<body>
  <script>
    $(document).ready(function() {
    var panelOne = $('.form-panel.two').height(),
      panelTwo = $('.form-panel.two')[0].scrollHeight;
  
    $('.form-panel.two').not('.form-panel.two.active').on('click', function(e) {
      e.preventDefault();
  
      $('.form-toggle').addClass('visible');
      $('.form-panel.one').addClass('hidden');
      $('.form-panel.two').addClass('active');
      $('.form').animate({
        'height': panelTwo
      }, 200);
    });
  
    $('.form-toggle').on('click', function(e) {
      e.preventDefault();
      $(this).removeClass('visible');
      $('.form-panel.one').removeClass('hidden');
      $('.form-panel.two').removeClass('active');
      $('.form').animate({
        'height': panelOne
      }, 200);
    });
  });
  </script>

  <script>
    console.log("works")
    document.addEventListener("DOMContentLoaded", () => {


      // login
      const logInBtn = document.getElementById("lgn-btn")
      logInBtn.addEventListener("click", (e)=> {

        e.preventDefault();
        alert("works")

        const email = document.getElementById("lgn-email").value; 
        const password = document.getElementById("lgn-password").value; 
        const options = {
          method: "POST", 
          headers: {"Content-Type" : "application/json"},
          body: JSON.stringify({"email" : email, "password" : password})
        }
        
        fetch("http://localhost:8000/auth/login", options)
        .then(response => response.json())
        .then(data => console.log(data))

       

      })

       //registration 

        const rgrBtn = document.getElementById("rgr-btn")

        rgrBtn.addEventListener("click", (e) => {
          alert("works")
          const username = document.getElementById("rgr-username").value
          const password = document.getElementById("rgr-password").value
          const cpassword = document.getElementById("rgr-cpassword").value
          const email = document.getElementById("rgr-email").value
        
          
          const options = {
          method: "POST", 
          headers: {"Content-Type" : "application/json"},
          body: JSON.stringify({"username": username, "email" : email, "password" : password})
        }
        console.log(options)
          fetch("http://localhost:8000/auth/register", options)
          .then(response => response.json())
          .then(data => console.log(data))
        })




    })
   
  </script>
    <!-- Form-->
<div class="form">
    <div class="form-toggle"></div>
    <div class="form-panel one">
      <div class="form-header">
        <h1>Account Login</h1>
      </div>
      <div class="form-content">
        <form>
          <div class="form-group">
            <label for="email">Email</label>
            <input type="text" id="lgn-email" name="email" required="required"/>
          </div>
          <div class="form-group">
            <label for="password">Password</label>
            <input type="password" id="lgn-password" name="password" required="required"/>
          </div>
          <!-- <div class="form-group">
            <label class="form-remember">
              <input type="checkbox"/>Remember Me
            </label><a class="form-recovery" href="#">Forgot Password?</a>
          </div> -->
          <div class="form-group">
            <button id= "lgn-btn" type="submit">Log In</button>
          </div>
        </form>
      </div>
    </div>
    <div class="form-panel two">                                             
      <div class="form-header">
        <h1>Register Account</h1>
      </div>
      <div class="form-content">
        <form>
          <div class="form-group">
            <label for="username">Username</label>
            <input type="text" id="rgr-username" name="username" required="required"/>
          </div>
          <div class="form-group">
            <label for="password">Password</label>
            <input type="password" id="rgr-password" name="password" required="required"/>
          </div>
          <div class="form-group">
            <label for="cpassword">Confirm Password</label>
            <input type="password" id="rgr-cpassword" name="cpassword" required="required"/>
          </div>
          <div class="form-group">
            <label for="email">Email Address</label>
            <input type="email" id="rgr-email" name="email" required="required"/>
          </div>
          <div class="form-group">
            <button type="submit" id="rgr-btn">Register</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <div class="pen-footer"></div>
</body>
</html>